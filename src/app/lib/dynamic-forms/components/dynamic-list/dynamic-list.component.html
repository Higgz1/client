<div>
  <div class="title">
    <h1> {{settings?.title ? settings.title : 'List ' + config.title}}</h1>
    <div class="partial-border light partial-on-left ion-margin-bottom"></div>
  </div>

  <div>
    <div class="flex-center">
      <ion-button fill="clear" size="icon-only" (click)="add.emit()" class="ion-margin-top ion-margin-bottom">
        <ion-icon name="add"></ion-icon>
      </ion-button>
      <ion-searchbar [(ngModel)]="filterBuilder.term" debounce="300" (ngModelChange)="createFilter()"></ion-searchbar>
      <ion-button size="icon-only" [color]="!showFilter? 'secondary' : 'primary'" fill="clear"
        class="ion-margin-top ion-margin-bottom" (click)="showFilter = !showFilter">
        <ion-icon name="funnel" [color]="!showFilter? 'secondary' : 'primary'"></ion-icon>
      </ion-button>

      <ion-button *ngFor="let button of (extraButtons || [])" size="icon-only" color="secondary" fill="clear"
        class="ion-margin-top ion-margin-bottom" (click)="extraButtonClick.emit({ key:button.key, data: null })">
        <ion-icon [name]="button.icon" color="secondary"></ion-icon>
      </ion-button>
    </div>

    <dynamic-factory #filterComp *ngIf="showFilter" [component]="filterComponent.type" [props]="filterComponent.props"
      (rowLengthChange)="rowLengthChange.emit(settings.row_length)" (filterChange)="createFilter()">
    </dynamic-factory>

  </div>

  <dynamic-factory #list *ngIf="listComponent.type" [component]="listComponent.type" [props]="listComponent.props"
    (edit)="edit.emit($event)" (delete)="edit.emit($event)" (extraButtonClick)="extraButtonClick.emit($event)"
    (more)="more.emit()">
  </dynamic-factory>
  <!-- 
  <table id="list" class="ion-margin-top">
    <thead>
      <tr>
        <th *ngFor="let field of fields">
          {{field.templateOptions?.label}}
        </th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of data">
        <td *ngFor="let field of fields" [ngStyle]="field.list.cssStyle" [ngClass]="field.list.cssClass"
          [innerHTML]="getParser(field, row[field.key]) | safeHtml"></td>
        <td class="ion-text-right">
          <ion-button *ngFor="let button of (config.listOptions?.rows?.extraButtons || [])" size="icon-only"
            color="secondary" fill="clear" class="ion-margin-top ion-margin-bottom"
            (click)="extraButtonClick.emit({ key:button.key, data: row })">
            <ion-icon [name]="button.icon" color="secondary"></ion-icon>
          </ion-button>
          <ion-button fill="clear" size="icon-only" color="secondary" (click)="edit.emit(row)">
            <ion-icon name="create"></ion-icon>
          </ion-button>
          <ion-button fill="clear" size="icon-only" color="danger" (click)="delete.emit(row)">
            <ion-icon name="trash"></ion-icon>
          </ion-button>
  </td>
  </tr>
  <tr *ngIf="!data.length">
    <td style="text-align: center;padding-top: 2em;padding-bottom: 2em;" [attr.colspan]="fields.length+1">
      No elements
    </td>
  </tr>
  </tbody>
  </table>

  <div class="ion-padding" *ngIf="settings.showMoreButton">
    <ion-button expand="full" fill="clear" color="primary" (click)="more.emit()">
      more
    </ion-button>
  </div> -->
</div>